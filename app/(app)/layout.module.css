/* app/(app)/layout.module.css */
/* Liquid Glass Â· iOS-26 (light-only) baseline for app shell */

.appShell {
  /* ---- Tokens ---- */
  --sbw: 280px;            /* sidebar width (overridden by data-collapsed) */
  --brand: #8d2828;
  --brand-ink: #ffffff;
  --brand-10: color-mix(in oklab, var(--brand) 10%, #ffffff);
  --brand-stroke: color-mix(in oklab, var(--brand) 52%, #ffffff);

  --ink: #0f172a;
  --muted: #6b7280;

  --lg-blur: 18px;
  --glass-tint: color-mix(in oklab, #ffffff 76%, var(--brand-10));
  --glass-tint-soft: color-mix(in oklab, #ffffff 84%, var(--brand-10));
  --glass-bg: color-mix(in oklab, var(--glass-tint) 100%, transparent);
  --glass-soft: color-mix(in oklab, var(--glass-tint-soft) 100%, transparent);
  --glass-stroke: color-mix(in oklab, var(--brand-stroke) 56%, #ffffff 44%);

  --shadow-lg: 0 18px 48px rgba(15,23,42,.16);
  --shadow-md: 0 12px 30px rgba(15,23,42,.12);
  --shadow-sm: 0 8px 18px rgba(15,23,42,.10);
  --inset: inset 0 1px 0 rgba(255,255,255,.66), inset 0 -1px 0 rgba(0,0,0,.04);

  /* ---- Layout ---- */
  display: grid;
  grid-template-columns: var(--sbw) minmax(0, 1fr);
  min-height: 100dvh;

  /* Liquid background for the whole app */
  background:
    radial-gradient(1200px 600px at 80% -10%, color-mix(in oklab, var(--brand) 18%, transparent), transparent 60%),
    radial-gradient(800px 480px at 10% 110%, color-mix(in oklab, var(--brand) 14%, transparent), transparent 60%),
    linear-gradient(180deg, #fafafa, #f3f4f6);
  color: var(--ink);
}

/* Collapse modifier via data-attribute (controlled from Sidebar) */
.appShell[data-collapsed="true"] {
  --sbw: 56px;
}

/* ---- Sidebar ---- */
.appSidebar {
  position: sticky;
  top: 0;
  z-index: 10;                 /* collapse button above main */
  height: 100dvh;
  overflow: visible;           /* allow toggle button to float out */
  border-right: 1px solid var(--glass-stroke);

  /* Liquid glass panel */
  background:
    linear-gradient(180deg,
      color-mix(in oklab, var(--glass-bg) 92%, transparent),
      color-mix(in oklab, var(--glass-bg) 78%, transparent));
  -webkit-backdrop-filter: blur(var(--lg-blur)) saturate(1.25);
  backdrop-filter: blur(var(--lg-blur)) saturate(1.25);
  box-shadow: var(--inset);
}

/* ---- Main content ---- */
.appMain {
  min-width: 0;
  height: 100dvh;
  overflow: auto;
  -webkit-overflow-scrolling: touch;

  /* Respect safe areas on iOS */
  padding: max(12px, env(safe-area-inset-top)) max(12px, env(safe-area-inset-right))
           max(12px, env(safe-area-inset-bottom)) max(12px, env(safe-area-inset-left));

  /* Subtle glass for content background, stays bright */
  background:
    linear-gradient(180deg,
      color-mix(in oklab, #ffffff 96%, transparent),
      color-mix(in oklab, #ffffff 90%, transparent));
}

/* ---- Accessibility focus ring ---- */
.appSidebar :where(a, button, [role="button"], [tabindex]:not([tabindex="-1"])),
.appMain :where(a, button, input, select, textarea, [role="button"], [tabindex]:not([tabindex="-1"])) {
  outline: none;
}
.appSidebar :where(a, button, [role="button"], [tabindex]:not([tabindex="-1"])):focus-visible,
.appMain :where(a, button, input, select, textarea, [role="button"], [tabindex]:not([tabindex="-1"])) :focus-visible,
.appMain :where(a, button, input, select, textarea, [role="button"], [tabindex]:not([tabindex="-1"])):focus-visible {
  box-shadow: 0 0 0 4px color-mix(in oklab, var(--brand) 26%, transparent);
  border-color: color-mix(in oklab, var(--brand) 52%, #ffffff);
}

/* ---- Scrollbar polish (WebKit) ---- */
.appMain::-webkit-scrollbar { width: 10px; height: 10px; }
.appMain::-webkit-scrollbar-track {
  background: color-mix(in oklab, #ffffff 90%, transparent);
  border-left: 1px solid var(--glass-stroke);
}
.appMain::-webkit-scrollbar-thumb {
  background: color-mix(in oklab, var(--brand) 22%, #d1d5db);
  border: 2px solid #fff;
  border-radius: 999px;
}
.appMain::-webkit-scrollbar-thumb:hover {
  background: color-mix(in oklab, var(--brand) 30%, #9ca3af);
}

/* ---- Motion preference ---- */
@media (prefers-reduced-motion: reduce) {
  .appShell,
  .appSidebar,
  .appMain { scroll-behavior: auto; }
}
