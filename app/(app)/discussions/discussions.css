/* ===========================
   Liquid Glass — iOS 26 style
   =========================== */

/* ------- Токены -------- */
:root {
  --brand: #8d2828;
  --ink: #0f172a;
  --muted: #6b7280;
  --line: #e5e7eb;
  --glassA: rgba(255,255,255,.72);
  --glassB: rgba(255,255,255,.42);
  --ring: rgba(141,40,40,.18);
  --shadow-1: 0 20px 60px rgba(17,24,39,.18), 0 6px 18px rgba(17,24,39,.08);
  --inset-top: inset 0 1px 0 rgba(255,255,255,.70);
  --inset-bot: inset 0 -1px 0 rgba(17,24,39,.06);
}

/* ------------- Контейнеры ------------- */
.disc-wrap {
  padding: 20px 16px 28px;
  background:
    radial-gradient(1200px 600px at 80% -10%, color-mix(in oklab, var(--brand) 14%, transparent), transparent 60%),
    radial-gradient(800px 480px at 10% 110%, color-mix(in oklab, var(--brand) 10%, transparent), transparent 60%),
    linear-gradient(180deg, #fafafa, #f3f4f6);
}

.disc-card {
  max-width: 880px;
  margin: 0 auto 16px;
  border-radius: 18px;
  border: 1px solid color-mix(in oklab, var(--brand) 20%, var(--line) 80%);
  background: linear-gradient(180deg, var(--glassA), var(--glassB));
  -webkit-backdrop-filter: blur(14px) saturate(160%);
  backdrop-filter: blur(14px) saturate(160%);
  box-shadow: var(--shadow-1), var(--inset-top), var(--inset-bot);
  padding: 18px 18px 16px;
  position: relative;
  overflow: hidden;
}
.disc-card::before{
  content:"";
  position:absolute; inset:0; pointer-events:none;
  background:
    radial-gradient(140% 90% at 50% -20%, rgba(255,255,255,.55), transparent 42%),
    linear-gradient(180deg, rgba(255,255,255,.10), transparent 60%);
}

.disc-title {
  margin: 0 0 6px;
  font-size: 26px;
  font-weight: 800;
  letter-spacing: .2px;
  color: var(--ink);
}
.disc-subtitle { margin: 0; color: var(--muted); font-size: 14px; }

/* ------------- Форма ------------- */
.disc-form { margin-top: 12px; }
.disc-label { display: block; font-size: 13px; color: #374151; margin-bottom: 6px; }

.disc-input {
  width: 100%;
  border-radius: 14px;
  border: 1px solid var(--line);
  background: linear-gradient(180deg, rgba(255,255,255,.92), rgba(255,255,255,.82));
  padding: 10px 12px;
  outline: none;
  transition: box-shadow .15s ease, border-color .15s ease, background .15s ease, transform .05s ease;
  font-size: 14px;
  box-shadow: var(--inset-top);
}
.disc-input:focus {
  border-color: color-mix(in oklab, var(--brand) 45%, var(--line) 55%);
  box-shadow: 0 0 0 4px var(--ring), var(--inset-top);
  background: #fff;
}
.disc-textarea { min-height: 120px; resize: vertical; }

.disc-form-row {
  margin-top: 10px;
  display: flex;
  gap: 12px;
  align-items: center;
  justify-content: space-between;
}
.disc-checkbox { font-size: 13px; color: #374151; display: inline-flex; gap: 8px; align-items: center; }
.disc-help { font-size: 12px; color: var(--muted); }

/* ------------- Лента ------------- */
.disc-list {
  max-width: 880px;
  margin: 0 auto;
  display: grid;
  gap: 12px;
}

.disc-post {
  position: relative;
  border-radius: 18px;
  background: linear-gradient(180deg, rgba(255,255,255,.86), rgba(255,255,255,.76));
  -webkit-backdrop-filter: blur(10px) saturate(140%);
  backdrop-filter: blur(10px) saturate(140%);
  border: 1px solid var(--line);
  padding: 14px 14px 10px;
  box-shadow: var(--shadow-1), var(--inset-top), var(--inset-bot);
  overflow: hidden;
}
.disc-post--pinned {
  border-color: color-mix(in oklab, var(--brand) 50%, var(--line) 50%);
  background:
    linear-gradient(180deg, color-mix(in oklab, var(--brand) 8%, transparent) 0%, transparent 40%),
    linear-gradient(180deg, rgba(255,255,255,.86), rgba(255,255,255,.74));
  box-shadow: 0 20px 60px color-mix(in oklab, var(--brand) 18%, transparent),
              0 6px 18px rgba(17,24,39,.08),
              var(--inset-top), var(--inset-bot);
}

/* заголовок поста */
.disc-post-head {
  display: flex;
  align-items: flex-start;
  justify-content: space-between;
  gap: 10px;
  margin-bottom: 8px;
}
.disc-post-flags { display: flex; align-items: center; gap: 10px; }

.disc-badge {
  display: inline-block;
  font-size: 12px;
  color: var(--brand);
  background: color-mix(in oklab, var(--brand) 10%, #fff 90%);
  border: 1px solid color-mix(in oklab, var(--brand) 35%, #fff 65%);
  padding: 2px 8px;
  border-radius: 999px;
  text-transform: lowercase;
  letter-spacing: .2px;
  box-shadow: var(--inset-top);
}
.disc-time { font-size: 12px; color: var(--muted); }

/* действия поста */
.disc-post-actions { display: flex; align-items: center; gap: 8px; flex-wrap: nowrap; }
.disc-inline-form { display: inline; }

/* Текст поста */
.disc-text {
  white-space: pre-wrap;
  word-break: break-word;
  font-size: 15px;
  color: var(--ink);
  line-height: 1.5;
  margin-bottom: 8px;
}

/* Футер поста */
.disc-post-foot {
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 12px;
}

/* Пустая лента */
.disc-empty { text-align: center; color: var(--muted); padding: 24px 0; font-size: 14px; }

/* Пагинация */
.disc-pager { max-width: 880px; margin: 10px auto 0; }
.disc-pager-row { display: grid; grid-template-columns: 1fr auto 1fr; align-items: center; }
.disc-pager-info { justify-self: center; font-size: 13px; color: #374151; }

/* ------------- Ссылки и кнопки ------------- */
.disc-link { color: var(--brand); text-decoration: none; border-bottom: 1px dashed color-mix(in oklab, var(--brand) 50%, transparent); }
.disc-link:hover { border-bottom-color: transparent; }

.disc-btn {
  display: inline-flex; align-items: center; justify-content: center;
  height: 38px; padding: 0 14px; border-radius: 14px;
  border: 1px solid color-mix(in oklab, var(--brand) 60%, #fff 40%);
  background: linear-gradient(180deg, color-mix(in oklab, var(--brand) 92%, #fff 8%), color-mix(in oklab, var(--brand) 82%, #000 18%));
  color: #fff;
  font-weight: 800; letter-spacing: .2px; cursor: pointer;
  transition: transform .06s ease, box-shadow .14s ease, opacity .2s ease;
  box-shadow: 0 10px 26px color-mix(in oklab, var(--brand) 28%, transparent), var(--inset-top);
}
.disc-btn:hover { transform: translateY(-1px); box-shadow: 0 14px 28px color-mix(in oklab, var(--brand) 32%, transparent), var(--inset-top); }
.disc-btn:active { transform: translateY(0); }
.disc-btn:focus-visible { outline: none; box-shadow: 0 0 0 4px var(--ring), 0 10px 26px color-mix(in oklab, var(--brand) 28%, transparent); }
.disc-btn:disabled { opacity: .65; transform: none; box-shadow: none; cursor: default; }

.disc-btn-lite {
  display: inline-flex; align-items: center; justify-content: center;
  height: 32px; padding: 0 12px; border-radius: 12px;
  border: 1px solid var(--line);
  background: linear-gradient(180deg, rgba(255,255,255,.92), rgba(255,255,255,.82));
  color: var(--ink); font-weight: 700; cursor: pointer;
  transition: background .15s ease, box-shadow .12s ease, transform .06s ease, border-color .15s ease;
  box-shadow: var(--inset-top);
}
.disc-btn-lite:hover { background: linear-gradient(180deg, rgba(255,255,255,.96), rgba(255,255,255,.88)); transform: translateY(-1px); box-shadow: var(--inset-top), var(--inset-bot); }
.disc-btn-lite:active { transform: translateY(0); }
.disc-btn-lite:focus-visible { outline: none; box-shadow: 0 0 0 4px var(--ring), var(--inset-top); }

.disc-btn-danger {
  display: inline-flex; align-items: center; justify-content: center;
  height: 32px; padding: 0 10px; border-radius: 12px;
  border: 1px solid color-mix(in oklab, #b91c1c 55%, #fff 45%);
  background: linear-gradient(180deg, rgba(239,68,68,.18), rgba(239,68,68,.10));
  color: #991b1b; font-weight: 800; cursor: pointer;
  transition: background .15s ease, box-shadow .12s ease, transform .06s ease;
  box-shadow: var(--inset-top);
}
.disc-btn-danger:hover { background: linear-gradient(180deg, rgba(239,68,68,.22), rgba(239,68,68,.12)); transform: translateY(-1px); }
.disc-btn-danger:active { transform: translateY(0); }

/* Кнопка "Подробнее" */
.disc-btn-more {
  display: inline-flex; align-items: center; justify-content: center;
  height: 32px; padding: 0 12px; border-radius: 12px;
  border: 1px solid var(--line);
  background: linear-gradient(180deg, rgba(255,255,255,.92), rgba(255,255,255,.82));
  color: var(--ink); font-size: 13px; font-weight: 700; cursor: pointer;
  transition: background .15s ease, box-shadow .12s ease, transform .06s ease;
  box-shadow: var(--inset-top);
}
.disc-btn-more:hover { background: linear-gradient(180deg, rgba(255,255,255,.96), rgba(255,255,255,.88)); transform: translateY(-1px); }
.disc-btn-more:active { transform: translateY(0); }

/* Хлебные крошки */
.disc-breadcrumbs { margin-bottom: 10px; }

/* ------------- Комментарии ------------- */
.disc-comments { margin-top: 14px; }
.disc-comments-title { margin: 6px 0 8px; font-size: 18px; font-weight: 800; color: var(--ink); }

.disc-comment-list { display: grid; gap: 10px; margin-top: 10px; }
.disc-comment {
  border: 1px solid var(--line);
  border-radius: 16px;
  background: linear-gradient(180deg, rgba(255,255,255,.92), rgba(255,255,255,.84));
  -webkit-backdrop-filter: blur(10px) saturate(140%);
  backdrop-filter: blur(10px) saturate(140%);
  padding: 10px 12px;
  box-shadow: var(--shadow-1), var(--inset-top), var(--inset-bot);
}
.disc-comment-head { display: flex; align-items: center; justify-content: space-between; margin-bottom: 6px; }
.disc-comment-text { white-space: pre-wrap; word-break: break-word; font-size: 14px; color: #111827; line-height: 1.5; }

/* Автор/время */
.disc-meta { display: flex; flex-wrap: wrap; gap: 8px; align-items: center; }
.disc-author { font-size: 13px; color: var(--ink); font-weight: 800; }

/* ------------- Лайк ------------- */
.disc-like {
  display: inline-flex; align-items: center; justify-content: center;
  height: 32px; width: 38px; border-radius: 12px;
  border: 1px solid var(--line);
  background: linear-gradient(180deg, rgba(255,255,255,.92), rgba(255,255,255,.84));
  color: #6b7280;
  cursor: pointer;
  transition: background .15s ease, transform .06s ease, box-shadow .12s ease, color .15s ease, border-color .15s ease;
  box-shadow: var(--inset-top);
}
.disc-like:hover { background: linear-gradient(180deg, rgba(255,255,255,.96), rgba(255,255,255,.88)); transform: translateY(-1px); }
.disc-like:active { transform: translateY(0); }
.disc-like--on { border-color: color-mix(in oklab, var(--brand) 50%, var(--line) 50%); background: color-mix(in oklab, var(--brand) 10%, #fff 90%); color: var(--brand); }
.disc-like-ic { display: block; }

/* сердце + счётчик в одну линию */
.disc-like-wrap { display: inline-flex; align-items: center; gap: 8px; }

/* Счётчик — стеклянная пилюля (и ловим id триггера из LikeModal) */
.disc-post-actions [id^="likes-"],
.disc-like-count,
.disc-like-count-btn {
  position: relative;
  display: inline-flex; align-items: center; justify-content: center;
  height: 32px; min-width: 36px; padding: 0 12px;
  border-radius: 9999px;
  border: 1px solid var(--line);
  background: linear-gradient(180deg, rgba(255,255,255,.92), rgba(255,255,255,.82));
  -webkit-backdrop-filter: blur(10px) saturate(160%);
  backdrop-filter: blur(10px) saturate(160%);
  color: var(--ink);
  font-size: 13px; font-weight: 800; line-height: 1;
  font-feature-settings: "tnum" 1;
  cursor: pointer; user-select: none;
  transition: transform .06s ease, box-shadow .14s ease, background .18s ease, border-color .18s ease, color .18s ease;
  box-shadow: var(--shadow-1), var(--inset-top), var(--inset-bot);
}
.disc-post-actions [id^="likes-"]::after,
.disc-like-count::after,
.disc-like-count-btn::after {
  content:""; position:absolute; inset:0; border-radius:inherit; pointer-events:none;
  background:
    radial-gradient(120% 70% at 50% -30%, rgba(255,255,255,.55), transparent 42%),
    linear-gradient(180deg, rgba(255,255,255,.10), transparent 60%);
}
.disc-post-actions [id^="likes-"]:hover,
.disc-like-count:hover,
.disc-like-count-btn:hover {
  transform: translateY(-1px);
}
.disc-post-actions [id^="likes-"]:active,
.disc-like-count:active,
.disc-like-count-btn:active {
  transform: translateY(0);
}
.disc-post-actions [id^="likes-"]:focus-visible,
.disc-like-count:focus-visible,
.disc-like-count-btn:focus-visible {
  outline: none;
  box-shadow: 0 0 0 4px var(--ring), var(--shadow-1);
}
.disc-like--on + [id^="likes-"],
.disc-like--on + .disc-like-count,
.disc-like--on + .disc-like-count-btn {
  border-color: color-mix(in oklab, var(--brand) 40%, var(--line) 60%);
  background: linear-gradient(180deg, rgba(255,255,255,.94), color-mix(in oklab, var(--brand) 12%, rgba(255,255,255,.82)));
  color: var(--brand);
}

/* ------------- Подсветка @упоминаний ------------- */
.disc-mention {
  display: inline-block;
  padding: 0 5px;
  border-radius: 8px;
  background: color-mix(in oklab, var(--brand) 12%, #fff 88%);
  color: var(--brand);
  border: 1px solid color-mix(in oklab, var(--brand) 32%, #fff 68%);
  box-shadow: var(--inset-top);
}
.disc-mention--all { background: #111827; color: #fff; border-color: #111827; }

/* ------------- Табы ------------- */
.disc-tabs { display:flex; gap:8px; margin:12px 0 8px; }
.disc-tab {
  display:inline-block; padding:6px 10px;
  border:1px solid color-mix(in oklab, var(--brand) 28%, var(--line) 72%);
  border-radius:12px; background: linear-gradient(180deg, var(--glassA), var(--glassB));
  -webkit-backdrop-filter: blur(8px) saturate(140%); backdrop-filter: blur(8px) saturate(140%);
  font-size:13px; line-height:1; color: var(--ink); font-weight: 700;
  box-shadow: var(--inset-top);
  transition: transform .06s ease, box-shadow .14s ease, border-color .18s ease;
}
.disc-tab--active { border-color: color-mix(in oklab, var(--brand) 55%, var(--line) 45%); box-shadow: 0 8px 20px color-mix(in oklab, var(--brand) 20%, transparent), var(--inset-top); }
.disc-tab:hover { transform: translateY(-1px); }

/* ------------- Модалка (портальная) ------------- */
.disc-portal { position: fixed; inset: 0; z-index: 9999; }
.disc-portal-backdrop {
  position: absolute; inset: 0;
  background:
    radial-gradient(120% 80% at 50% 10%, rgba(0,0,0,.10), transparent 60%),
    radial-gradient(120% 80% at 50% 90%, rgba(0,0,0,.12), transparent 60%),
    rgba(15,23,42,.46);
  -webkit-backdrop-filter: blur(12px) saturate(120%);
  backdrop-filter: blur(12px) saturate(120%);
}
.disc-portal-card {
  position: absolute; left: 50%; top: 50%;
  transform: translate(-50%, -50%);
  max-width: min(640px, calc(100vw - 32px));
  max-height: min(80vh, 720px);
}

.disc-modal-card {
  position: relative;
  border-radius: 18px;
  border: 1px solid color-mix(in oklab, var(--brand) 20%, var(--line) 80%);
  background: linear-gradient(180deg, var(--glassA), var(--glassB));
  -webkit-backdrop-filter: blur(14px) saturate(160%);
  backdrop-filter: blur(14px) saturate(160%);
  box-shadow: var(--shadow-1), var(--inset-top), var(--inset-bot);
  overflow: hidden;
}
.disc-modal-card::before{
  content:""; position:absolute; inset:0; pointer-events:none;
  background:
    radial-gradient(140% 90% at 50% -20%, rgba(255,255,255,.55), transparent 42%),
    linear-gradient(180deg, rgba(255,255,255,.10), transparent 60%);
}

.disc-modal-head {
  display: flex; align-items: center; justify-content: space-between;
  padding: 12px 16px;
  border-bottom: 1px solid rgba(17,24,39,.10);
  background: linear-gradient(180deg, rgba(255,255,255,.55), rgba(255,255,255,.20));
  -webkit-backdrop-filter: blur(6px) saturate(140%);
  backdrop-filter: blur(6px) saturate(140%);
}
.disc-modal-title { margin: 0; font-size: 16px; color: var(--ink); font-weight: 800; }
.disc-modal-body { padding: 12px 16px; overflow: auto; }
.disc-like-list { list-style: none; margin: 0; padding: 0; display: grid; gap: 6px; }
.disc-like-item { display: flex; align-items: center; font-size: 14px; color: var(--ink); }
.disc-like-handle { font-weight: 800; }
.disc-like-sep { opacity: .5; margin: 0 4px; }
.disc-like-fio { opacity: .95; }

/* ------------- Эффекты ------------- */
.disc-muted { color: var(--muted); font-size: 13px; }
.disc-post:hover { box-shadow: 0 24px 60px rgba(17,24,39,.12), var(--inset-top), var(--inset-bot); }

/* ------------- Доп. бейджи ------------- */
.disc-badge--me { background: var(--brand); color: #fff; border: 1px solid color-mix(in oklab, var(--brand) 85%, #000 15%); }
.disc-badge--all { background: #111827; color: #fff; border: 1px solid #111827; }
/* Кнопка "Комментариев" — liquid glass pill */
.disc-comments-btn{
  display:inline-flex; align-items:center; justify-content:center;
  height:32px; padding:0 12px; min-width:36px;
  border-radius:9999px;
  border:1px solid var(--line, #e5e7eb);
  background: linear-gradient(180deg, rgba(255,255,255,.92), rgba(255,255,255,.82));
  -webkit-backdrop-filter: blur(10px) saturate(160%);
  backdrop-filter: blur(10px) saturate(160%);
  color: var(--ink, #0f172a);
  font-size:13px; font-weight:800; text-decoration:none;
  box-shadow: 0 20px 60px rgba(17,24,39,.18), 0 6px 18px rgba(17,24,39,.08),
              inset 0 1px 0 rgba(255,255,255,.70), inset 0 -1px 0 rgba(17,24,39,.06);
  transition: transform .06s ease, box-shadow .14s ease, background .18s ease, border-color .18s ease, color .18s ease;
}
.disc-comments-btn:hover{ transform: translateY(-1px); }
.disc-comments-btn:active{ transform: translateY(0); }
.disc-comments-btn:focus-visible{
  outline:none;
  box-shadow: 0 0 0 4px var(--ring, rgba(141,40,40,.18)),
              0 20px 60px rgba(17,24,39,.18);
  border-color: color-mix(in oklab, var(--brand, #8d2828) 40%, var(--line, #e5e7eb) 60%);
}
